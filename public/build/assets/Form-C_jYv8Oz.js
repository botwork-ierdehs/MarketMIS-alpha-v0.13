import{c as ve,o as y,w as R,a as t,b as f,f as h,t as d,d as x,e as S,n as I,p as _e,F as we,r as ke,H as Se,g as q,u as ye,L as qe,i as Re,B as Ie,j as le,l as Pe}from"./app-BT8JCygI.js";import{S as Te,C as Ee,P as je,D as Ne,d as ge}from"./SingleImageUpload-Brd6-NJk.js";import{m as Ce,h as be,i as Me,j as he,f as xe,k as se,a as Be,c as Fe}from"./helper-CoiklTbV.js";import{M as Ae,s as Le}from"./Map-D8raP2uR.js";import{A as Ue}from"./AppLayout-BwNpdR10.js";import{T as Ve}from"./TextInput-BQ7iAE_n.js";import{L as ze}from"./LoadingButton-pngNNKcF.js";import{I as Oe}from"./InputLabel-BgI2huqF.js";import{I as Ge}from"./InputError-CabsvCC3.js";import{M as Je}from"./MultiSelect-Cr0vLxkC.js";import{C as He}from"./ConfirmationModal-DtE6bHDK.js";import{S as Xe}from"./SecondaryButton-_kH_xm9B.js";import{_ as Qe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Logo-DmBDO1OI.js";import"./Icons-CXmFZwmz.js";import"./Footer-RxzRf-uW.js";import"./Modal-DZt4hw2D.js";const Ke={__name:"Form",props:{stallTypes:Object,stallTypesAll:Object,stallRental:Object,requirements:Object,paymentDetails:Object,fees:Object,auth:Object,total_payments:Object},setup(C,{expose:l}){var U,V,z,O,G,J,H,X,Q,K,W,Y;l();const v=Se(),e=q([]),pe=q([]),_=q(1),w=q(null),j=q({}),M=q(null),D=q(!1),P=q([]),g=q(!1),F=q(null),a=C,p=()=>Me(v.url),b=()=>(console.log("isReuploadPage(page.url)",he(v.url)),he(v.url)),c=()=>(console.log("checkIfRenewal(page.url)",be(v.url)),be(v.url)),re=()=>{var n;return b()||c()||p()?(n=a==null?void 0:a.stallRental)==null?void 0:n.name:"Create New"},s=ye({type:c()?2:1,business_name:c()||p()||b()?(U=a==null?void 0:a.stallRental)==null?void 0:U.name:"",stall_id:c()||p()||b()?(z=(V=a==null?void 0:a.stallRental)==null?void 0:V.stalls)==null?void 0:z.id:"",requirements:[],acknowledgeContract:c()||p()||b()?(O=a==null?void 0:a.stallRental)==null?void 0:O.acknowledgeContract:"",reference_number:c()||p()||b()?(J=(G=a==null?void 0:a.stallRental)==null?void 0:G.paymentRecord)==null?void 0:J.reference_number:"",attachment_signature:[],total_payment:c()||p()||b()?(X=(H=a==null?void 0:a.stallRental)==null?void 0:H.paymentRecord)==null?void 0:X.total_payments:0,fees:c()||p()||b()?Array.isArray((Q=a==null?void 0:a.stallRental)==null?void 0:Q.fees_additional)?(K=a==null?void 0:a.stallRental)==null?void 0:K.fees_additional.map(Number):[]:[],step:_.value,bulb:c()||p()||b()?(W=a==null?void 0:a.stallRental)==null?void 0:W.bulb:null,stall_rental_id:c()||p()||b()?(Y=a==null?void 0:a.stallRental)==null?void 0:Y.id:null}),ne=ye({requirements:[]}),oe={lesseeName:{page:0,x:160,y:530},lesseeNamePage2:{page:2,x:110,y:370},barangay:{page:0,x:320,y:520},stallNo:{page:0,x:300,y:440},day:{page:2,x:120,y:300},month:{page:2,x:500,y:310},signature:{page:2,x:450,y:200,w:100,h:50}},ie=qe(()=>{var u,m;return((m=(u=a.auth)==null?void 0:u.user)==null?void 0:m.first_name.split(" ")).map(r=>r[0]).join("")}),de=()=>{var n,u,m;s.requirements=p()?(n=a==null?void 0:a.stallRental)==null?void 0:n.requirements.map(r=>({requirement_checklist_id:r.checklist_id,attachment:r.attachment})):e.value.map(r=>({requirement_checklist_id:r.documentType,attachment:r.file})),s.attachment_signature=M.value,s.total_payment=(u=a==null?void 0:a.total_payments)==null?void 0:u.total,s.acknowledgeContract=!0,s.fees_additional=se(a==null?void 0:a.fees,s.bulb),g.value=!0,(m=F.value)==null||m.fillContract(),g.value&&s.post(route("applications.stalls.store"),{preserveScroll:!0,onSuccess:async()=>{g.value=!1,le.visit(route("applications.stalls.index"),{preserveScroll:!0,preserveState:!1})},onError:r=>{console.error("Form errors:",r)}})},ue=async()=>{var u,m;if(e.value.some(r=>r.status==="uploading")){s.errors.requirements="Please wait until all files are uploaded.";return}if(e.value.length===0){s.errors.requirements="The requirements are required.";return}const n=new FormData;n.append("_method","PUT"),n.append("stall_id",s.stall_id||""),n.append("business_name",s.business_name||""),n.append("type",2),n.append("bulb",s.bulb||""),s.fees=se(s.fees,s.bulb,"edit"),n.append("total_payment",s.total_payment||""),n.append("acknowledgeContract",s.acknowledgeContract?1:0),e.value.forEach((r,i)=>{n.append(`requirements[${i}][requirement_checklist_id]`,r.documentType),r.file instanceof File&&n.append(`requirements[${i}][attachment]`,r.file)}),s.attachment_signature instanceof File&&n.append("attachment_signature",s.attachment_signature),g.value=!0,(u=F.value)==null||u.fillContract(),ge.Inertia.post(route("applications.stalls.update",(m=a==null?void 0:a.stallRental)==null?void 0:m.id),n,{preserveScroll:!0,onStart:()=>{g.value=!0},onSuccess:()=>{le.visit(route("applications.stalls.index"),{preserveScroll:!0,preserveState:!1})},onError:r=>{g.value=!1,console.error("Form errors:",r)}})},N=()=>{var n,u,m;if(b()){if(e.value.some(i=>i.status==="uploading")){s.errors.requirements="Please wait until all files are uploaded.";return}if(e.value.length===0){s.errors.requirements="The requirements are required.";return}const r=new FormData;r.append("_method","PUT"),r.append("stall_id",s.stall_id||""),r.append("business_name",s.business_name||""),r.append("type",s.type||""),r.append("bulb",s.bulb||""),r.append("total_payment",s.total_payment||""),r.append("acknowledgeContract",s.acknowledgeContract?1:0),e.value.forEach((i,k)=>{r.append(`requirements[${k}][requirement_checklist_id]`,i.documentType),i.file instanceof File&&r.append(`requirements[${k}][attachment]`,i.file)}),s.attachment_signature instanceof File&&r.append("attachment_signature",s.attachment_signature),ge.Inertia.post(route("applications.stalls.update",(n=a==null?void 0:a.stallRental)==null?void 0:n.id),r,{preserveScroll:!0,onStart:()=>{g.value=!0},onSuccess:()=>{g.value=!1,le.visit(route("applications.stalls.index"),{preserveScroll:!0,preserveState:!1})},onError:i=>{g.value=!1,console.error("Form errors:",i)}})}else{const r=new FormData;if(r.append("_method","PUT"),r.append("stall_id",s.stall_id||""),r.append("business_name",s.business_name||""),r.append("type",s.type||""),r.append("bulb",s.bulb||0),s.fees=se(s.fees,s.bulb,"edit"),r.append("fees",s.fees),r.append("total_payment",((u=a==null?void 0:a.total_payments)==null?void 0:u.total)||0),r.append("acknowledgeContract",s.acknowledgeContract?1:0),c()){if(r.append("type",2),e.value.some(i=>i.status==="uploading")){s.errors.requirements="Please wait until all files are uploaded.";return}if(e.value.length===0){s.errors.requirements="The requirements are required.";return}e.value.forEach((i,k)=>{r.append(`requirements[${k}][requirement_checklist_id]`,i.documentType),i.file instanceof File&&r.append(`requirements[${k}][attachment]`,i.file)})}s.attachment_signature instanceof File&&r.append("attachment_signature",s.attachment_signature),ge.Inertia.post(route("applications.stalls.update",(m=a==null?void 0:a.stallRental)==null?void 0:m.id),r,{preserveScroll:!0,onStart:()=>{g.value=!0},onSuccess:()=>{var i;g.value=!1,(i=F.value)==null||i.fillContract(),le.visit(route("applications.stalls.index"),{preserveScroll:!0,preserveState:!1})},onError:i=>{g.value=!1,console.error("Form errors:",i)}})}},me=()=>{p()||b()?N():B()},ce=n=>`${Fe(n.amount)} per sqr mtr`,B=()=>{var n,u,m,r,i,k,Z,$,ee;if(_.value===1)c()?s.put(route("applications.stalls.renew",(n=a==null?void 0:a.stallRental)==null?void 0:n.id),{onSuccess:()=>{_.value++}}):(s.fees=se(a==null?void 0:a.fees,s.bulb),s.post(route("applications.stalls.store"),{preserveState:!0,onSuccess:()=>{_.value++}}));else if(_.value===2){const te=((m=(u=a==null?void 0:a.requirements)==null?void 0:u.stall_new)==null?void 0:m.length)||0,T=e.value.filter(E=>E.status==="uploaded").length,ae=e.value.some(E=>E.status==="uploading");console.log("Required:",te,"Uploaded:",T,"Uploading:",ae),ae?s.errors.requirements="Please wait until all files are uploaded.":T<te?s.errors.requirements="Please upload all required documents.":T===0?s.errors.requirements="The requirements are required.":(s.errors.requirements=null,_.value++)}else _.value===3?(pe.value=M.value,_.value++):_.value===4&&(s.step=_.value,console.log("checkIfRenewal",c()),j.value={lesseeName:xe((r=a==null?void 0:a.auth)==null?void 0:r.user),lesseeNamePage2:xe((i=a==null?void 0:a.auth)==null?void 0:i.user),barangay:(Z=(k=a==null?void 0:a.auth)==null?void 0:k.user)==null?void 0:Z.address,stallNo:($=w==null?void 0:w.value)!=null&&$.name?(ee=w==null?void 0:w.value)==null?void 0:ee.name:"",signature:M.value,day:new Date().getDate(),month:new Date().getMonth()+1},D.value=!0)},A=n=>{var m;console.log("Selected Stall:",n);const u=a.stallTypesAll.filter(r=>r.name===(n==null?void 0:n.Stall)||r.name===(n==null?void 0:n.name));console.log("val=",u),w.value=u[0],s.stall_id=(m=u[0])==null?void 0:m.id},fe=()=>{D.value=!1};P.value=a.stallsData||[],Re(()=>a.stallTypes,n=>{P.value=Ce(n)||[]},{deep:!0,immediate:!0}),Ie(()=>{var n;(p()||c())&&A((n=a==null?void 0:a.stallRental)==null?void 0:n.stalls)});const L={page:v,localFileReq:e,localFileSignature:pe,step:_,selectedStall:w,contractData:j,signature:M,isSubmit:D,stallData:P,isGenerating:g,contractRef:F,props:a,checkIfEdit:p,checkIfReupload:b,checkIfRenewal:c,titlePage:re,form:s,reuploadForm:ne,fieldMap:oe,initials:ie,submit:de,renewals:ue,update:N,submitRequest:me,feeDetails:ce,nextButton:B,onStallSelect:A,closeSubmit:fe,ref:q,watch:Re,computed:qe,onMounted:Ie,get Link(){return Pe},get usePage(){return Se},get useForm(){return ye},get router(){return le},get Inertia(){return ge.Inertia},get formatAmount(){return Fe},get formatDateShort(){return Be},get formatFees(){return se},get fullName(){return xe},get isEditPage(){return Me},get isRenewalPage(){return be},get isReuploadPage(){return he},get mapTablesToGeoJSON(){return Ce},get scopeData(){return Le},AppLayout:Ue,TextInput:Ve,LoadingButton:ze,InputLabel:Oe,InputError:Ge,DocumentUpload:Ne,Map:Ae,PdfMonitor:je,Contract:Ee,SingleImageUpload:Te,MultiSelect:Je,ConfirmationModal:He,SecondaryButton:Xe};return Object.defineProperty(L,"__isScriptSetup",{enumerable:!1,value:!0}),L}},We={class:"mb-8 text-3xl font-bold"},Ye={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},Ze={class:"max-w-3xl bg-white rounded-md shadow overflow-hidden"},$e={key:0,class:"flex items-center justify-between mt-6"},et={class:"flex flex-col items-center text-center w-1/3"},tt={class:"flex flex-col items-center text-center w-1/3"},at={class:"flex flex-col items-center text-center w-1/3"},lt={class:"flex flex-col items-center text-center w-1/3"},st={key:0,class:"p-6 space-y-6"},rt={class:"flex flex-col md:flex-row gap-4 px-5"},nt={class:"w-full md:w-full"},ot={class:"flex flex-col md:flex-row gap-4 px-5"},it={class:"w-full md:w-full"},dt={class:"px-5"},ut={class:"w-full border p-4 rounded bg-gray-50"},mt={class:"relative w-full h-[400px] rounded overflow-hidden"},ct={key:0,class:"flex flex-col md:flex-row gap-4 px-5"},ft={class:"w-full md:w-full"},gt={class:"border p-4 rounded bg-gray-50"},pt={class:"ml-4 list-disc"},yt={key:1,class:"p-6 space-y-6"},bt={key:2},ht={key:0,class:"p-6 space-y-6"},xt={key:1,class:"p-6 space-y-6"},vt={class:"flex gap-6"},_t={class:"flex flex-col items-center"},wt={class:"w-16 h-16 rounded-full bg-primary text-white flex items-center justify-center font-bold text-lg"},kt={class:"mt-2 text-xs px-2 py-0.5 rounded bg-green-100 text-green-600 font-medium"},St={class:"flex-1"},qt={class:"text-lg font-semibold text-primary"},Rt={class:"text-sm text-gray-600"},It=["href"],Ct={class:"text-sm text-gray-600"},Mt={class:"grid grid-cols-2 gap-4 text-sm text-gray-700"},Ft={class:"text-gray-600"},Dt={class:"text-gray-600"},Pt={class:"text-gray-600"},Tt={class:"text-gray-600"},Et={class:"text-gray-600"},jt={class:"bg-gray-50 rounded-lg p-4 space-y-2 text-sm"},Nt={class:"space-y-2"},Bt={class:"flex items-center space-x-2"},At={class:"text-secondary"},Lt={class:"text-gray-600"},Ut={class:"font-bold text-gray-600"},Vt={class:"text-green-600 font-semibold"},zt={class:"flex items-center px-8 py-4 bg-gray-50 border-t border-gray-100"},Ot={class:"ml-auto flex gap-2"},Gt={key:0},Jt={class:"flex justify-end space-x-3 p-4"};function Ht(C,l,v,e,pe,_){return y(),ve(e.AppLayout,{title:"Stall Types"},{header:R(()=>[...l[7]||(l[7]=[t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Stall Types ",-1)])]),default:R(()=>{var w,j,M,D,P,g,F,a,p,b,c,re,s,ne,oe,ie,de,ue,N,me,ce,B,A,fe,L,U,V,z,O,G,J,H,X,Q,K,W,Y,n,u,m,r,i,k,Z,$,ee,te,T,ae,E;return[t("h1",We,[f(e.Link,{class:"text-primary hover:text-secondary",href:"/my-rentals/stall-leasing"},{default:R(()=>[...l[8]||(l[8]=[h("Stalls Leasing",-1)])]),_:1}),l[9]||(l[9]=t("span",{class:"text-secondary font-medium"},"/",-1)),h(" "+d(e.titlePage()),1)]),t("div",Ye,[t("div",Ze,[!e.checkIfEdit()&&!e.checkIfReupload()?(y(),x("div",$e,[t("div",et,[t("div",{class:I(["flex items-center justify-center w-12 h-12 rounded-full border-2",e.step===1?"bg-primary text-white border-primary":"border-gray-300 text-gray-400"])},[...l[10]||(l[10]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5.121 17.804A7.968 7.968 0 0112 15c1.933 0 3.683.69 5.121 1.804M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)])],2),t("span",{class:I(["mt-2 text-sm",e.step===1?"text-primary font-semibold":"text-gray-400"])},"Vendor Info",2)]),t("div",{class:I(["flex-1 border-t-2 mx-2",e.step>1?"border-primary":"border-gray-200"])},null,2),t("div",tt,[t("div",{class:I(["flex items-center justify-center w-12 h-12 rounded-full border-2",e.step===2?"bg-primary text-white border-primary":"border-gray-300 text-gray-400"])},[...l[11]||(l[11]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 7h10M7 11h10M7 15h6M5 5v14h14V5H5z"})],-1)])],2),t("span",{class:I(["mt-2 text-sm",e.step===2?"text-primary font-semibold":"text-gray-400"])},"Requirements",2)]),t("div",{class:I(["flex-1 border-t-2 mx-2",e.step>2?"border-primary":"border-gray-200"])},null,2),t("div",at,[t("div",{class:I(["flex items-center justify-center w-12 h-12 rounded-full border-2",e.step===3?"bg-primary text-white border-primary":"border-gray-300 text-gray-400"])},[...l[12]||(l[12]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",width:"32",height:"32"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 6h13M8 12h13M8 18h13M3 6h.01M3 12h.01M3 18h.01M21 21l-6-6"})],-1)])],2),t("span",{class:I(["mt-2 text-sm",e.step===3?"text-primary font-semibold":"text-gray-400"])},"Rental Agreement",2)]),t("div",lt,[t("div",{class:I(["flex items-center justify-center w-12 h-12 rounded-full border-2",e.step===4?"bg-primary text-white border-primary":"border-gray-300 text-gray-400"])},[...l[13]||(l[13]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",width:"32",height:"32"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4M4 6h16M4 12h16M4 18h16"})],-1)])],2),t("span",{class:I(["mt-2 text-sm",e.step===4?"text-primary font-semibold":"text-gray-400"])},"Finish Application",2)])])):S("",!0),t("form",{onSubmit:_e(e.submitRequest,["prevent"])},[!e.checkIfReupload()&&(e.step===1||e.checkIfEdit())?(y(),x("div",st,[t("div",rt,[t("div",nt,[f(e.InputLabel,{for:"Business Name",value:"Business Name"}),f(e.TextInput,{id:"business_name",modelValue:e.form.business_name,"onUpdate:modelValue":l[0]||(l[0]=o=>e.form.business_name=o),type:"text",class:"mt-1 block w-full",required:"",disabled:e.checkIfRenewal(),autofocus:"",autocomplete:"business_name"},null,8,["modelValue","disabled"]),f(e.InputError,{class:"mt-2",message:(j=(w=e.form)==null?void 0:w.errors)==null?void 0:j.business_name},null,8,["message"])])]),t("div",ot,[t("div",it,[f(e.InputLabel,{for:"Add ons",value:"Bulbs"}),f(e.TextInput,{id:"bulbs",modelValue:e.form.bulb,"onUpdate:modelValue":l[1]||(l[1]=o=>e.form.bulb=o),type:"number",class:"mt-1 block w-full",autofocus:"",autocomplete:"bulbs"},null,8,["modelValue"]),f(e.InputError,{class:"mt-2",message:(D=(M=e.form)==null?void 0:M.errors)==null?void 0:D.bulb},null,8,["message"])])]),t("div",dt,[t("div",ut,[t("div",mt,[f(e.Map,{"stalls-data":e.mapTablesToGeoJSON(v.stallTypes),"scope-data":e.scopeData,center:[13.965601,121.527501],zoom:20,height:"500px",disabled:e.checkIfEdit()||e.checkIfRenewal(),onStallClick:e.onStallSelect},null,8,["stalls-data","scope-data","disabled"])]),f(e.InputError,{class:"mt-2",message:(g=(P=e.form)==null?void 0:P.errors)==null?void 0:g.stall_id},null,8,["message"])])]),e.selectedStall?(y(),x("div",ct,[t("div",ft,[t("div",gt,[l[18]||(l[18]=t("h2",{class:"text-lg font-bold mb-2 text-secondary"},"Transient Details",-1)),t("p",null,[l[14]||(l[14]=t("strong",null,"Name:",-1)),h(" "+d((F=e.selectedStall)==null?void 0:F.name),1)]),t("p",null,[l[15]||(l[15]=t("strong",null,"Size:",-1)),h(" "+d((a=e.selectedStall)!=null&&a.size?`${(p=e.selectedStall)==null?void 0:p.size.length}X${(b=e.selectedStall)==null?void 0:b.size.width}`:"-"),1)]),t("p",null,[l[16]||(l[16]=t("strong",null,"Category:",-1)),h(" "+d((re=(c=e.selectedStall)==null?void 0:c.categories)==null?void 0:re.name),1)]),t("p",null,[l[17]||(l[17]=t("strong",null,"Description:",-1)),h(" "+d((ne=(s=e.selectedStall)==null?void 0:s.categories)==null?void 0:ne.description),1)]),l[19]||(l[19]=t("h3",{class:"mt-2 font-semibold text-secondary"},"Fees:",-1)),t("ul",pt,[(y(!0),x(we,null,ke((ie=(oe=e.selectedStall)==null?void 0:oe.categories)==null?void 0:ie.fee,o=>(y(),x("li",{key:o.id},[t("strong",null,d(o.type)+":",1),h(" "+d(e.feeDetails(o)),1)]))),128))])])])])):S("",!0)])):S("",!0),e.step===2||e.checkIfReupload()?(y(),x("div",yt,[f(e.DocumentUpload,{requiredDocs:(de=v.requirements)==null?void 0:de.stall_new,files:e.localFileReq,"onUpdate:files":l[2]||(l[2]=o=>e.localFileReq=o)},null,8,["requiredDocs","files"]),f(e.InputError,{class:"mt-2",message:e.form.errors.requirements},null,8,["message"])])):S("",!0),!e.checkIfEdit()&&!e.checkIfReupload()?(y(),x("div",bt,[e.step===3?(y(),x("div",ht,[l[20]||(l[20]=t("h2",{class:"text-lg font-bold text-secondary mb-2"}," Please review the rental agreement below and upload signature: ",-1)),f(e.PdfMonitor,{pdfUrl:"/sample.pdf"}),f(e.SingleImageUpload,{modelValue:e.signature,"onUpdate:modelValue":l[3]||(l[3]=o=>e.signature=o),width:120,height:60,files:e.localFileSignature,"onUpdate:files":l[4]||(l[4]=o=>e.localFileSignature=o)},null,8,["modelValue","files"])])):S("",!0),e.step===4?(y(),x("div",xt,[l[26]||(l[26]=t("h2",{class:"text-lg font-bold text-secondary mb-2"}," Summary: ",-1)),l[27]||(l[27]=t("div",{class:"flex items-center justify-between"},null,-1)),t("div",vt,[t("div",_t,[t("div",wt,d(e.initials),1),t("span",kt,d((ce=(me=(N=(ue=C.$page)==null?void 0:ue.props)==null?void 0:N.auth)==null?void 0:me.user)!=null&&ce.status?"Active":"Not Active"),1)]),t("div",St,[t("h2",qt,d(e.fullName((fe=(A=(B=C.$page)==null?void 0:B.props)==null?void 0:A.auth)==null?void 0:fe.user)),1),t("p",Rt,[l[21]||(l[21]=h(" Email: ",-1)),t("a",{href:"mailto:"+((z=(V=(U=(L=C.$page)==null?void 0:L.props)==null?void 0:U.auth)==null?void 0:V.user)==null?void 0:z.email),class:"text-blue-600 hover:underline"},d((J=(G=(O=C.$page)==null?void 0:O.props)==null?void 0:G.auth)==null?void 0:J.user.email),9,It)]),t("p",Ct,"Mobile: "+d((Q=(X=(H=C.$page)==null?void 0:H.props)==null?void 0:X.auth)==null?void 0:Q.user.mobile),1)])]),t("div",Mt,[t("div",null,[l[22]||(l[22]=t("h3",{class:"font-semibold text-secondary"},"Stall Details",-1)),t("p",Ft,"Stall Name: "+d((K=e.selectedStall)==null?void 0:K.name),1),t("p",Dt,"Size: "+d((W=e.selectedStall)!=null&&W.size?`${(n=(Y=e.selectedStall)==null?void 0:Y.size)==null?void 0:n.length}X${(m=(u=e.selectedStall)==null?void 0:u.size)==null?void 0:m.width} `:"-"),1),t("p",Pt,"Birthday: "+d(e.formatDateShort((k=(i=(r=C.$page)==null?void 0:r.props)==null?void 0:i.auth)==null?void 0:k.user.birthday)),1),t("p",Tt,"Address: "+d((ee=($=(Z=C.$page)==null?void 0:Z.props)==null?void 0:$.auth)==null?void 0:ee.user.address),1)]),t("div",null,[l[23]||(l[23]=t("h3",{class:"font-semibold text-secondary"},"Category",-1)),t("p",Et,d((te=e.selectedStall)==null?void 0:te.categories.name),1)])]),t("div",jt,[l[25]||(l[25]=t("h3",{class:"font-semibold text-secondary"},"Payment Details",-1)),t("ul",Nt,[(y(!0),x(we,null,ke((T=v.total_payments)==null?void 0:T.breakdown,(o,De)=>(y(),x("li",{key:De,class:"flex justify-between items-center px-3 py-2 text-sm"},[t("div",Bt,[t("span",null,[t("strong",At,d(o!=null&&o.size?`• ${o==null?void 0:o.type}(${o.size}): `:`• ${o==null?void 0:o.type}: `),1),t("span",Lt,d(e.formatAmount(o==null?void 0:o.amount)),1)])])]))),128))]),t("p",Ut,[l[24]||(l[24]=h(" Calculated Quarterly Payment: ",-1)),t("span",Vt,d(e.formatAmount((ae=v.total_payments)==null?void 0:ae.total)),1)])])])):S("",!0)])):S("",!0),t("div",zt,[f(e.Link,{href:e.checkIfEdit()?`/my-rentals/stall-leasing/${(E=v.stallRental)==null?void 0:E.id}`:"/my-rentals/stall-leasing",class:"text-red-600 hover:underline",tabindex:"-1"},{default:R(()=>[...l[28]||(l[28]=[h("Cancel",-1)])]),_:1},8,["href"]),t("div",Ot,[!e.checkIfEdit()&&!e.checkIfReupload()||e.checkIfRenewal()?(y(),x("div",Gt,[e.step>1?(y(),x("button",{key:0,type:"button",class:"px-4 py-2 mr-2 rounded-md bg-gray-200 hover:bg-gray-300",onClick:l[5]||(l[5]=o=>e.step--)}," Back ")):S("",!0),e.step<4?(y(),x("button",{key:1,type:"button",class:"px-4 py-2 rounded-md bg-primary text-white hover:bg-secondary",onClick:e.nextButton},d(e.step===3?"Agree":"Next"),1)):S("",!0)])):S("",!0),e.step===4||e.checkIfEdit()||e.checkIfReupload()?(y(),ve(e.LoadingButton,{key:1,loading:e.form.processing,class:"bg-primary ml-auto",type:"submit"},{default:R(()=>[h(d(e.checkIfEdit()||e.checkIfReupload()?"Submit":"Continue"),1)]),_:1},8,["loading"])):S("",!0)])])],32)])]),f(e.ConfirmationModal,{show:e.isSubmit,onClose:e.closeSubmit},{title:R(()=>[...l[29]||(l[29]=[h(" Confirm ",-1)])]),content:R(()=>[...l[30]||(l[30]=[t("div",{class:"space-y-4 p-4"},[t("p",{class:"text-gray-700 text-sm md:text-base"}," Do you confirm your intention to submit this request? Please submit the duly accomplished agreement form, downloaded after this process, to the Office of Public Market. ")],-1)])]),footer:R(()=>[t("div",Jt,[f(e.SecondaryButton,{onClick:e.closeSubmit},{default:R(()=>[...l[31]||(l[31]=[h(" Cancel ",-1)])]),_:1}),t("form",{onSubmit:l[6]||(l[6]=_e(o=>e.checkIfRenewal()?e.renewals():e.submit(),["prevent"]))},[f(e.LoadingButton,{class:"bg-green-600 text-white ml-2 px-4 py-2 rounded-md text-white hover:bg-green-700",disabled:e.isGenerating},{default:R(()=>[...l[32]||(l[32]=[h(" Submit ",-1)])]),_:1},8,["disabled"]),f(e.Contract,{ref:"contractRef",src:"/sample.pdf",data:e.contractData,"field-map":e.fieldMap,"file-name":"contract-filled.pdf",signature:e.signature,class:"hidden"},null,8,["data","signature"])],32)])]),_:1},8,["show"])]}),_:1})}const ua=Qe(Ke,[["render",Ht],["__file","Form.vue"]]);export{ua as default};

import{c as ke,o as g,w as S,a as t,b as c,f as h,t as u,d as b,e as q,n as I,p as Se,F as pe,r as be,H as qe,g as R,u as Re,L as Ie,i as Ce,B as Fe,j as ae,l as Te}from"./app-BT8JCygI.js";import{S as Ee,C as De,P as je,D as Ne,d as fe}from"./SingleImageUpload-Brd6-NJk.js";import{h as ye,i as Me,j as xe,m as Be,f as he,g as Ae,k as j,a as Ve,c as Pe}from"./helper-CoiklTbV.js";import{A as Ue}from"./AppLayout-BwNpdR10.js";import{T as Le}from"./TextInput-BQ7iAE_n.js";import{L as ze}from"./LoadingButton-pngNNKcF.js";import{I as Oe}from"./InputLabel-BgI2huqF.js";import{I as Ge}from"./InputError-CabsvCC3.js";import{M as He}from"./MultiSelect-Cr0vLxkC.js";import{C as Je}from"./ConfirmationModal-DtE6bHDK.js";import{S as Xe}from"./SecondaryButton-_kH_xm9B.js";import{S as Qe}from"./SelectInput-KG-XBZei.js";import{_ as Ke}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Logo-DmBDO1OI.js";import"./Icons-CXmFZwmz.js";import"./Footer-RxzRf-uW.js";import"./Modal-DZt4hw2D.js";import"./v4-C6aID195.js";const We={__name:"Form",props:{stallTypes:Object,stallTypesAll:Object,tableRental:Object,requirements:Object,paymentDetails:Object,fees:Object,auth:Object,total_payments:Object},setup(C,{expose:l}){var V,U,L,z,O,G,H,J,X,Q,K,W;l();const v=qe(),e=R([]),ge=R([]),_=R(1),w=R(null),N=R({}),F=R(null),P=R(!1),B=R([]),p=R(!1),M=R(null),a=C,y=()=>Me(v.url),x=()=>(console.log("isReuploadPage(page.url)",xe(v.url)),xe(v.url)),f=()=>(console.log("checkIfRenewal(page.url)",ye(v.url)),ye(v.url)),le=()=>{var n;return x()||f()||y()?(n=a==null?void 0:a.tableRental)==null?void 0:n.name:"Create New"},s=Re({type:f()?2:1,business_name:f()||y()||x()?(V=a==null?void 0:a.tableRental)==null?void 0:V.name:"",stall_id:f()||y()||x()?(L=(U=a==null?void 0:a.tableRental)==null?void 0:U.stalls)==null?void 0:L.id:"",requirements:[],acknowledgeContract:f()||y()||x()?(z=a==null?void 0:a.tableRental)==null?void 0:z.acknowledgeContract:"",reference_number:f()||y()||x()?(G=(O=a==null?void 0:a.tableRental)==null?void 0:O.paymentRecord)==null?void 0:G.reference_number:"",attachment_signature:[],total_payment:f()||y()||x()?(J=(H=a==null?void 0:a.tableRental)==null?void 0:H.paymentRecord)==null?void 0:J.total_payments:0,fees:f()||y()||x()?Array.isArray((X=a==null?void 0:a.tableRental)==null?void 0:X.fees_additional)?(Q=a==null?void 0:a.tableRental)==null?void 0:Q.fees_additional.map(Number):[]:[],step:_.value,bulb:f()||y()||x()?(K=a==null?void 0:a.tableRental)==null?void 0:K.bulb:null,stall_rental_id:f()||y()||x()?(W=a==null?void 0:a.tableRental)==null?void 0:W.id:null}),se={lesseeName:{page:0,x:160,y:530},lesseeNamePage2:{page:2,x:110,y:370},barangay:{page:0,x:320,y:520},stallNo:{page:0,x:300,y:440},day:{page:2,x:120,y:300},month:{page:2,x:500,y:310},signature:{page:2,x:450,y:200,w:100,h:50}},re=Ie(()=>{var d,m;return((m=(d=a.auth)==null?void 0:d.user)==null?void 0:m.first_name.split(" ")).map(r=>r[0]).join("")}),ne=()=>{var n,d,m;s.requirements=y()?(n=a==null?void 0:a.tableRental)==null?void 0:n.requirements.map(r=>({requirement_checklist_id:r.checklist_id,attachment:r.attachment})):e.value.map(r=>({requirement_checklist_id:r.documentType,attachment:r.file})),s.attachment_signature=F.value,s.total_payment=(d=a==null?void 0:a.total_payments)==null?void 0:d.total,s.acknowledgeContract=!0,s.fees_additional=j(a.fees,s.bulb),s.fees=j(a.fees,s.bulb),p.value=!0,(m=M.value)==null||m.fillContract(),p.value&&s.post(route("applications.table.store"),{preserveScroll:!0,onSuccess:async()=>{p.value=!1,ae.visit(route("applications.table.index"),{preserveScroll:!0,preserveState:!1})},onError:r=>{console.error("Form errors:",r)}})},oe=async()=>{var d,m;if(e.value.some(r=>r.status==="uploading")){s.errors.requirements="Please wait until all files are uploaded.";return}if(e.value.length===0){s.errors.requirements="The requirements are required.";return}const n=new FormData;n.append("_method","PUT"),n.append("stall_id",s.stall_id||""),n.append("business_name",s.business_name||""),n.append("type",2),n.append("bulb",s.bulb||""),s.fees=j(s.fees,s.bulb,"edit"),n.append("total_payment",s.total_payment||""),n.append("acknowledgeContract",s.acknowledgeContract?1:0),e.value.forEach((r,i)=>{n.append(`requirements[${i}][requirement_checklist_id]`,r.documentType),r.file instanceof File&&n.append(`requirements[${i}][attachment]`,r.file)}),s.attachment_signature instanceof File&&n.append("attachment_signature",s.attachment_signature),p.value=!0,(d=M.value)==null||d.fillContract(),fe.Inertia.post(route("applications.table.update",(m=a==null?void 0:a.tableRental)==null?void 0:m.id),n,{preserveScroll:!0,onStart:()=>{p.value=!0},onSuccess:()=>{ae.visit(route("applications.table.index"),{preserveScroll:!0,preserveState:!1})},onError:r=>{p.value=!1,console.error("Form errors:",r)}})},ie=()=>{var n,d,m;if(x()){if(e.value.some(i=>i.status==="uploading")){s.errors.requirements="Please wait until all files are uploaded.";return}if(e.value.length===0){s.errors.requirements="The requirements are required.";return}const r=new FormData;r.append("_method","PUT"),r.append("stall_id",s.stall_id||""),r.append("business_name",s.business_name||""),r.append("type",s.type||""),r.append("bulb",s.bulb||""),s.fees=j(s.fees,s.bulb,"edit"),r.append("total_payment",s.total_payment||""),r.append("acknowledgeContract",s.acknowledgeContract?1:0),e.value.forEach((i,k)=>{r.append(`requirements[${k}][requirement_checklist_id]`,i.documentType),i.file instanceof File&&r.append(`requirements[${k}][attachment]`,i.file)}),s.attachment_signature instanceof File&&r.append("attachment_signature",s.attachment_signature),fe.Inertia.post(route("applications.table.update",(n=a==null?void 0:a.tableRental)==null?void 0:n.id),r,{preserveScroll:!0,onStart:()=>{p.value=!0},onSuccess:()=>{p.value=!1,ae.visit(route("applications.table.index"),{preserveScroll:!0,preserveState:!1})},onError:i=>{p.value=!1,console.error("Form errors:",i)}})}else{const r=new FormData;if(r.append("_method","PUT"),r.append("stall_id",s.stall_id||""),r.append("business_name",s.business_name||""),r.append("type",1),r.append("bulb",s.bulb||0),r.append("total_payment",((d=a==null?void 0:a.total_payments)==null?void 0:d.total)||0),r.append("acknowledgeContract",s.acknowledgeContract?1:0),f()){if(r.append("type",2),e.value.some(i=>i.status==="uploading")){s.errors.requirements="Please wait until all files are uploaded.";return}if(e.value.length===0){s.errors.requirements="The requirements are required.";return}e.value.forEach((i,k)=>{r.append(`requirements[${k}][requirement_checklist_id]`,i.documentType),i.file instanceof File&&r.append(`requirements[${k}][attachment]`,i.file)})}s.attachment_signature instanceof File&&r.append("attachment_signature",s.attachment_signature),fe.Inertia.post(route("applications.table.update",(m=a==null?void 0:a.tableRental)==null?void 0:m.id),r,{preserveScroll:!0,onStart:()=>{p.value=!0},onSuccess:()=>{var i;p.value=!1,(i=M.value)==null||i.fillContract(),ae.visit(route("applications.table.index"),{preserveScroll:!0,preserveState:!1})},onError:i=>{p.value=!1,console.error("Form errors:",i)}})}},de=n=>`${Pe(n.amount)} per table`,ue=()=>{var n,d,m,r,i,k,Y,Z,$;if(_.value===1)f()?s.put(route("applications.table.renew",(n=a==null?void 0:a.tableRental)==null?void 0:n.id),{onSuccess:()=>{_.value++}}):(s.fees=j(a.fees,s.bulb),s.post(route("applications.table.store"),{preserveState:!0,onSuccess:()=>{_.value++}}));else if(_.value===2){const ee=((m=(d=a==null?void 0:a.requirements)==null?void 0:d.stall_new)==null?void 0:m.length)||0,E=e.value.filter(D=>D.status==="uploaded").length,te=e.value.some(D=>D.status==="uploading");console.log("Required:",ee,"Uploaded:",E,"Uploading:",te),te?s.errors.requirements="Please wait until all files are uploaded.":E<ee?s.errors.requirements="Please upload all required documents.":E===0?s.errors.requirements="The requirements are required.":(s.errors.requirements=null,_.value++)}else _.value===3?(ge.value=F.value,_.value++):_.value===4&&(s.step=_.value,console.log("checkIfRenewal",f()),N.value={lesseeName:he((r=a==null?void 0:a.auth)==null?void 0:r.user),lesseeNamePage2:he((i=a==null?void 0:a.auth)==null?void 0:i.user),barangay:(Y=(k=a==null?void 0:a.auth)==null?void 0:k.user)==null?void 0:Y.address,stallNo:(Z=w==null?void 0:w.value)!=null&&Z.name?($=w==null?void 0:w.value)==null?void 0:$.name:"",signature:F.value,day:new Date().getDate(),month:new Date().getMonth()+1},P.value=!0)},T=n=>{if(!n){w.value=null;return}const d=a.stallTypesAll.find(m=>m.id===n);console.log("Selected Stall:",d),w.value=d||null},me=()=>{P.value=!1};B.value=a.stallsData||[],Ce(()=>s.stall_id,n=>{T(n)},{immediate:!0}),Fe(()=>{var n,d;(y()||f())&&T((d=(n=a==null?void 0:a.tableRental)==null?void 0:n.stalls)==null?void 0:d.id)});const A={page:v,localFileReq:e,localFileSignature:ge,step:_,selectedStall:w,contractData:N,signature:F,isSubmit:P,stallData:B,isGenerating:p,contractRef:M,props:a,checkIfEdit:y,checkIfReupload:x,checkIfRenewal:f,titlePage:le,form:s,fieldMap:se,initials:re,submit:ne,renewals:oe,update:ie,feeDetails:de,nextButton:ue,onStallSelect:T,closeSubmit:me,ref:R,watch:Ce,computed:Ie,onMounted:Fe,get Link(){return Te},get usePage(){return qe},get useForm(){return Re},get router(){return ae},get Inertia(){return fe.Inertia},get formatAmount(){return Pe},get formatDateShort(){return Ve},get formatFees(){return j},get formatStallStatus(){return Ae},get fullName(){return he},get isEditPage(){return Me},get isRenewalPage(){return ye},get isReuploadPage(){return xe},get mapTablesToGeoJSON(){return Be},AppLayout:Ue,TextInput:Le,LoadingButton:ze,InputLabel:Oe,InputError:Ge,DocumentUpload:Ne,PdfMonitor:je,Contract:De,SingleImageUpload:Ee,MultiSelect:He,ConfirmationModal:Je,SecondaryButton:Xe,SelectInput:Qe};return Object.defineProperty(A,"__isScriptSetup",{enumerable:!1,value:!0}),A}},Ye={class:"mb-8 text-3xl font-bold"},Ze={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},$e={class:"max-w-3xl bg-white rounded-md shadow overflow-hidden"},et={key:0,class:"flex items-center justify-between mt-6"},tt={class:"flex flex-col items-center text-center w-1/3"},at={class:"flex flex-col items-center text-center w-1/3"},lt={class:"flex flex-col items-center text-center w-1/3"},st={class:"flex flex-col items-center text-center w-1/3"},rt={key:0,class:"p-6 space-y-6"},nt={class:"flex flex-col md:flex-row gap-4 px-5"},ot={class:"w-full md:w-full"},it={class:"flex flex-col md:flex-row gap-4 px-5"},dt={class:"w-full md:w-full"},ut={class:"flex flex-col md:flex-row gap-4 px-5"},mt={class:"w-full md:w-full"},ct=["value"],ft={key:0,class:"flex flex-col md:flex-row gap-4 px-5"},gt={class:"w-full md:w-full"},pt={class:"border p-4 rounded bg-gray-50"},bt={class:"ml-4 list-disc"},yt={key:1,class:"p-6 space-y-6"},xt={key:2},ht={key:0,class:"p-6 space-y-6"},vt={key:1,class:"p-6 space-y-6"},_t={class:"flex gap-6"},wt={class:"flex flex-col items-center"},kt={class:"w-16 h-16 rounded-full bg-primary text-white flex items-center justify-center font-bold text-lg"},St={class:"mt-2 text-xs px-2 py-0.5 rounded bg-green-100 text-green-600 font-medium"},qt={class:"flex-1"},Rt={class:"text-lg font-semibold text-primary"},It={class:"text-sm text-gray-600"},Ct=["href"],Ft={class:"text-sm text-gray-600"},Mt={class:"grid grid-cols-2 gap-4 text-sm text-gray-700"},Pt={class:"text-gray-600"},Tt={class:"text-gray-600"},Et={class:"text-gray-600"},Dt={class:"text-gray-600"},jt={class:"text-gray-600"},Nt={class:"bg-gray-50 rounded-lg p-4 space-y-2 text-sm"},Bt={class:"space-y-2"},At={class:"flex items-center space-x-2"},Vt={class:"text-secondary"},Ut={class:"text-gray-600"},Lt={class:"font-bold text-gray-600"},zt={class:"text-green-600 font-semibold"},Ot={class:"flex items-center px-8 py-4 bg-gray-50 border-t border-gray-100"},Gt={class:"ml-auto flex gap-2"},Ht={key:0},Jt={class:"flex justify-end space-x-3 p-4"};function Xt(C,l,v,e,ge,_){return g(),ke(e.AppLayout,{title:"Stall Types"},{header:S(()=>[...l[9]||(l[9]=[t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Stall Types ",-1)])]),default:S(()=>{var w,N,F,P,B,p,M,a,y,x,f,le,s,se,re,ne,oe,ie,de,ue,T,me,A,V,U,L,z,O,G,H,J,X,Q,K,W,n,d,m,r,i,k,Y,Z,$,ee,E,te,D,ve,_e;return[t("h1",Ye,[c(e.Link,{class:"text-primary hover:text-secondary",href:"/my-rentals/stall-leasing"},{default:S(()=>[...l[10]||(l[10]=[h("Table Spaces",-1)])]),_:1}),l[11]||(l[11]=t("span",{class:"text-secondary font-medium"},"/",-1)),h(" "+u(e.titlePage()),1)]),t("div",Ze,[t("div",$e,[!e.checkIfEdit()&&!e.checkIfReupload()?(g(),b("div",et,[t("div",tt,[t("div",{class:I(["flex items-center justify-center w-12 h-12 rounded-full border-2",e.step===1?"bg-primary text-white border-primary":"border-gray-300 text-gray-400"])},[...l[12]||(l[12]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5.121 17.804A7.968 7.968 0 0112 15c1.933 0 3.683.69 5.121 1.804M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)])],2),t("span",{class:I(["mt-2 text-sm",e.step===1?"text-primary font-semibold":"text-gray-400"])},"Vendor Info",2)]),t("div",{class:I(["flex-1 border-t-2 mx-2",e.step>1?"border-primary":"border-gray-200"])},null,2),t("div",at,[t("div",{class:I(["flex items-center justify-center w-12 h-12 rounded-full border-2",e.step===2?"bg-primary text-white border-primary":"border-gray-300 text-gray-400"])},[...l[13]||(l[13]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 7h10M7 11h10M7 15h6M5 5v14h14V5H5z"})],-1)])],2),t("span",{class:I(["mt-2 text-sm",e.step===2?"text-primary font-semibold":"text-gray-400"])},"Requirements",2)]),t("div",{class:I(["flex-1 border-t-2 mx-2",e.step>2?"border-primary":"border-gray-200"])},null,2),t("div",lt,[t("div",{class:I(["flex items-center justify-center w-12 h-12 rounded-full border-2",e.step===3?"bg-primary text-white border-primary":"border-gray-300 text-gray-400"])},[...l[14]||(l[14]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",width:"32",height:"32"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 6h13M8 12h13M8 18h13M3 6h.01M3 12h.01M3 18h.01M21 21l-6-6"})],-1)])],2),t("span",{class:I(["mt-2 text-sm",e.step===3?"text-primary font-semibold":"text-gray-400"])},"Rental Agreement",2)]),t("div",st,[t("div",{class:I(["flex items-center justify-center w-12 h-12 rounded-full border-2",e.step===4?"bg-primary text-white border-primary":"border-gray-300 text-gray-400"])},[...l[15]||(l[15]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",width:"32",height:"32"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4M4 6h16M4 12h16M4 18h16"})],-1)])],2),t("span",{class:I(["mt-2 text-sm",e.step===4?"text-primary font-semibold":"text-gray-400"])},"Finish Application",2)])])):q("",!0),t("form",{onSubmit:l[7]||(l[7]=Se(o=>e.checkIfEdit()||e.checkIfReupload()?e.update():e.nextButton(),["prevent"]))},[!e.checkIfReupload()&&(e.step===1||e.checkIfEdit())?(g(),b("div",rt,[t("div",nt,[t("div",ot,[c(e.InputLabel,{for:"Business Name",value:"Business Name"}),c(e.TextInput,{id:"business_name",modelValue:e.form.business_name,"onUpdate:modelValue":l[0]||(l[0]=o=>e.form.business_name=o),type:"text",class:"mt-1 block w-full",required:"",autofocus:"",autocomplete:"business_name"},null,8,["modelValue"]),c(e.InputError,{class:"mt-2",message:(N=(w=e.form)==null?void 0:w.errors)==null?void 0:N.business_name},null,8,["message"])])]),t("div",it,[t("div",dt,[c(e.InputLabel,{for:"Add ons",value:"Bulbs"}),c(e.TextInput,{id:"bulbs",modelValue:e.form.bulb,"onUpdate:modelValue":l[1]||(l[1]=o=>e.form.bulb=o),type:"number",class:"mt-1 block w-full",autofocus:"",autocomplete:"bulbs"},null,8,["modelValue"]),c(e.InputError,{class:"mt-2",message:(P=(F=e.form)==null?void 0:F.errors)==null?void 0:P.bulb},null,8,["message"])])]),t("div",ut,[t("div",mt,[c(e.InputLabel,{for:"gender_id",value:"Table",class:"mb-1 block w-full"}),c(e.SelectInput,{modelValue:e.form.stall_id,"onUpdate:modelValue":l[2]||(l[2]=o=>e.form.stall_id=o),id:"stall_id",required:"",disabled:e.checkIfEdit(),autocomplete:"stall_id"},{default:S(()=>[(g(!0),b(pe,null,be(v.stallTypes,o=>{var ce,we;return g(),b("option",{key:o.id,value:e.checkIfEdit()?(we=(ce=v.tableRental)==null?void 0:ce.stalls)==null?void 0:we.id:o.id},u(o.name),9,ct)}),128))]),_:1},8,["modelValue","disabled"]),c(e.InputError,{class:"mt-2",message:(p=(B=e.form)==null?void 0:B.errors)==null?void 0:p.stall_id},null,8,["message"])])]),e.selectedStall?(g(),b("div",ft,[t("div",gt,[t("div",pt,[l[20]||(l[20]=t("h2",{class:"text-lg font-bold mb-2 text-secondary"},"Transient Details",-1)),t("p",null,[l[16]||(l[16]=t("strong",null,"Name:",-1)),h(" "+u((M=e.selectedStall)==null?void 0:M.name),1)]),t("p",null,[l[17]||(l[17]=t("strong",null,"Size:",-1)),h(" "+u((a=e.selectedStall)!=null&&a.size?`${(y=e.selectedStall)==null?void 0:y.size.length}X${(x=e.selectedStall)==null?void 0:x.size.width}`:"-"),1)]),t("p",null,[l[18]||(l[18]=t("strong",null,"Category:",-1)),h(" "+u((le=(f=e.selectedStall)==null?void 0:f.categories)==null?void 0:le.name),1)]),t("p",null,[l[19]||(l[19]=t("strong",null,"Description:",-1)),h(" "+u((se=(s=e.selectedStall)==null?void 0:s.categories)==null?void 0:se.description),1)]),l[21]||(l[21]=t("h3",{class:"mt-2 font-semibold text-secondary"},"Fees:",-1)),t("ul",bt,[(g(!0),b(pe,null,be((ne=(re=e.selectedStall)==null?void 0:re.categories)==null?void 0:ne.fee,o=>(g(),b("li",{key:o.id},[t("strong",null,u(o.type)+":",1),h(" "+u(e.feeDetails(o)),1)]))),128))])])])])):q("",!0)])):q("",!0),e.step===2||e.checkIfReupload()?(g(),b("div",yt,[c(e.DocumentUpload,{requiredDocs:(oe=v.requirements)==null?void 0:oe.stall_new,files:e.localFileReq,"onUpdate:files":l[3]||(l[3]=o=>e.localFileReq=o)},null,8,["requiredDocs","files"]),c(e.InputError,{class:"mt-2",message:e.form.errors.requirements},null,8,["message"])])):q("",!0),!e.checkIfEdit()&&!e.checkIfReupload()?(g(),b("div",xt,[e.step===3?(g(),b("div",ht,[l[22]||(l[22]=t("h2",{class:"text-lg font-bold text-secondary mb-2"}," Please review the rental agreement below and upload signature: ",-1)),c(e.PdfMonitor,{pdfUrl:"/sample.pdf"}),c(e.SingleImageUpload,{modelValue:e.signature,"onUpdate:modelValue":l[4]||(l[4]=o=>e.signature=o),width:120,height:60,files:e.localFileSignature,"onUpdate:files":l[5]||(l[5]=o=>e.localFileSignature=o)},null,8,["modelValue","files"])])):q("",!0),e.step===4?(g(),b("div",vt,[l[28]||(l[28]=t("h2",{class:"text-lg font-bold text-secondary mb-2"}," Summary: ",-1)),l[29]||(l[29]=t("div",{class:"flex items-center justify-between"},null,-1)),t("div",_t,[t("div",wt,[t("div",kt,u(e.initials),1),t("span",St,u((T=(ue=(de=(ie=C.$page)==null?void 0:ie.props)==null?void 0:de.auth)==null?void 0:ue.user)!=null&&T.status?"Active":"Not Active"),1)]),t("div",qt,[t("h2",Rt,u(e.fullName((V=(A=(me=C.$page)==null?void 0:me.props)==null?void 0:A.auth)==null?void 0:V.user)),1),t("p",It,[l[23]||(l[23]=h(" Email: ",-1)),t("a",{href:"mailto:"+((O=(z=(L=(U=C.$page)==null?void 0:U.props)==null?void 0:L.auth)==null?void 0:z.user)==null?void 0:O.email),class:"text-blue-600 hover:underline"},u((J=(H=(G=C.$page)==null?void 0:G.props)==null?void 0:H.auth)==null?void 0:J.user.email),9,Ct)]),t("p",Ft,"Mobile: "+u((K=(Q=(X=C.$page)==null?void 0:X.props)==null?void 0:Q.auth)==null?void 0:K.user.mobile),1)])]),t("div",Mt,[t("div",null,[l[24]||(l[24]=t("h3",{class:"font-semibold text-secondary"},"Stall Details",-1)),t("p",Pt,"Stall Name: "+u((W=e.selectedStall)==null?void 0:W.name),1),t("p",Tt,"Size: "+u((n=e.selectedStall)!=null&&n.size?`${(m=(d=e.selectedStall)==null?void 0:d.size)==null?void 0:m.length}X${(i=(r=e.selectedStall)==null?void 0:r.size)==null?void 0:i.width} `:"-"),1),t("p",Et,"Birthday: "+u(e.formatDateShort((Z=(Y=(k=C.$page)==null?void 0:k.props)==null?void 0:Y.auth)==null?void 0:Z.user.birthday)),1),t("p",Dt,"Address: "+u((E=(ee=($=C.$page)==null?void 0:$.props)==null?void 0:ee.auth)==null?void 0:E.user.address),1)]),t("div",null,[l[25]||(l[25]=t("h3",{class:"font-semibold text-secondary"},"Category",-1)),t("p",jt,u((te=e.selectedStall)==null?void 0:te.categories.name),1)])]),t("div",Nt,[l[27]||(l[27]=t("h3",{class:"font-semibold text-secondary"},"Payment Details",-1)),t("ul",Bt,[(g(!0),b(pe,null,be((D=v.total_payments)==null?void 0:D.breakdown,(o,ce)=>(g(),b("li",{key:ce,class:"flex justify-between items-center px-3 py-2 text-sm"},[t("div",At,[t("span",null,[t("strong",Vt,u(o!=null&&o.size?`• ${o==null?void 0:o.type}(${o.size}): `:`• ${o==null?void 0:o.type}: `),1),t("span",Ut,u(e.formatAmount(o==null?void 0:o.amount)),1)])])]))),128))]),t("p",Lt,[l[26]||(l[26]=h(" Calculated Quarterly Payment: ",-1)),t("span",zt,u(e.formatAmount((ve=v.total_payments)==null?void 0:ve.total)),1)])])])):q("",!0)])):q("",!0),t("div",Ot,[c(e.Link,{href:e.checkIfEdit()?`/my-rentals/stall-leasing/${(_e=v.tableRental)==null?void 0:_e.id}`:"/my-rentals/stall-leasing",class:"text-red-600 hover:underline",tabindex:"-1"},{default:S(()=>[...l[30]||(l[30]=[h("Cancel",-1)])]),_:1},8,["href"]),t("div",Gt,[!e.checkIfEdit()&&!e.checkIfReupload()||e.checkIfRenewal()?(g(),b("div",Ht,[e.step>1?(g(),b("button",{key:0,type:"button",class:"px-4 py-2 mr-2 rounded-md bg-gray-200 hover:bg-gray-300",onClick:l[6]||(l[6]=o=>e.step--)}," Back ")):q("",!0),e.step<4?(g(),b("button",{key:1,type:"button",class:"px-4 py-2 rounded-md bg-primary text-white hover:bg-secondary",onClick:e.nextButton},u(e.step===3?"Agree":"Next"),1)):q("",!0)])):q("",!0),e.step===4||e.checkIfEdit()||e.checkIfReupload()?(g(),ke(e.LoadingButton,{key:1,loading:e.form.processing,class:"bg-primary ml-auto",type:"submit"},{default:S(()=>[h(u(e.checkIfEdit()?"Submit":"Continue"),1)]),_:1},8,["loading"])):q("",!0)])])],32)])]),c(e.ConfirmationModal,{show:e.isSubmit,onClose:e.closeSubmit},{title:S(()=>[...l[31]||(l[31]=[h(" Confirm ",-1)])]),content:S(()=>[...l[32]||(l[32]=[t("div",{class:"space-y-4 p-4"},[t("p",{class:"text-gray-700 text-sm md:text-base"}," Do you confirm your intention to submit this request? Please submit the duly accomplished agreement form, downloaded after this process, to the Office of Public Market. ")],-1)])]),footer:S(()=>[t("div",Jt,[c(e.SecondaryButton,{onClick:e.closeSubmit},{default:S(()=>[...l[33]||(l[33]=[h(" Cancel ",-1)])]),_:1}),t("form",{onSubmit:l[8]||(l[8]=Se(o=>e.checkIfRenewal()?e.renewals():e.submit(),["prevent"]))},[c(e.LoadingButton,{class:"bg-green-600 text-white ml-2 px-4 py-2 rounded-md text-white hover:bg-green-700",disabled:e.isGenerating},{default:S(()=>[...l[34]||(l[34]=[h(" Submit ",-1)])]),_:1},8,["disabled"]),c(e.Contract,{ref:"contractRef",src:"/sample.pdf",data:e.contractData,"field-map":e.fieldMap,"file-name":"contract-filled.pdf",signature:e.signature,class:"hidden"},null,8,["data","signature"])],32)])]),_:1},8,["show"])]}),_:1})}const ca=Ke(We,[["render",Xt],["__file","Form.vue"]]);export{ca as default};
